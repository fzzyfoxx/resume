# Paths are relative to that temporary context.
FROM python:3.10-slim-buster

WORKDIR /app

# Copy the service's requirements.txt from the temporary build context
COPY requirements.txt .

# Copy the pre-built wheels from the temporary build context
# (which were copied there by the Python script)
COPY packages /tmp/wheels/

# Install dependencies, including the local wheel
RUN pip install --no-cache-dir \
    --find-links=/tmp/wheels/ \
    geodoc_config \
    -r requirements.txt

# Copy the service's own code
COPY service-reports.py .

# Clean up
RUN rm -rf /tmp/wheels/

# Define how your service runs
CMD ["python", "service-reports.py"]